<style>
    .shadow {
        background: #000;
        filter: alpha(opacity=70); /* Transparency */
        opacity: 0.5;
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 965;
    }

    .login-box {
        text-align: center;
        width: 500px;
        height: 350px;
        border-radius: 10px;
        /*border: 3px solid gainsboro;*/
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background: #ffe3e1;
        -webkit-box-shadow: #666 0 0 6px;
        -moz-box-shadow: #666 0 0 6px;
        box-shadow: #fff8e7 0 0 6px 6px;
        z-index: 1000;
    }
    .login-box .close-btn {
        text-align: right;
        cursor: pointer;
    }
    .login-box .close-btn img {
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        border-radius: 50%;
    }
    .login-box .input-item {
        font-size: 26px;
        font-weight: bold;
        margin-bottom: 15px;
    }
    .login-box label {
        display: block;
        margin-left: -35%;
        margin-bottom: -10px;
        font-weight: 500;
        font-size: 20px;
    }
    .login-box input {
        height: 25px;
        width: 58%;
    }
    .login-box .header {
        border-bottom: 2px solid;
        margin-top: -6%;
        margin-bottom: 2%;
    }
    .login-box .bottom {
        position: fixed;
        text-align: center;
        width: 100%;
        bottom: 2px;
    }
    .login-box .bottom button {
        padding: 2% 10%;
        cursor: pointer;
    }
    .login-box .textarea {
        margin-top: 10%;
        width: 85%;
        height: 45px;
    }
    .login-box .table_div {
        height: 166px;
        overflow-y: auto;
        font-size: 16px;
        border-top: 2px solid;
        border-bottom: 2px solid;
    }
    .login-box select {
        width: 35%;
        height: 20%;
        margin-top: 5%;
        padding-left: 2%;
    }
</style>
<div style="display: none" class="shadow"></div>

<div style="display: none" class="login-box login-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Login
    </div>
    <div class="input-item">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" placeholder="">
    </div>
    <div class="input-item">
        <label for="password">Password</label>
        <input type="password" name="password" id="password" placeholder="">
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Login</button>
    </div>
    </form>
</div>
<div style="display: none" class="login-box register-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Register
    </div>
    <div class="input-item">
        <label for="username1">Username</label>
        <input type="text" name="username" id="username1" placeholder="">
    </div>
    <div class="input-item">
        <label for="password1">Password</label>
        <input type="password" name="password" id="password1" placeholder="">
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Register</button>
    </div>
    </form>
</div>
<div style="display: none" class="login-box topic-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Create a new topic
    </div>
    <div class="input-item">
        <textarea type="text" class="textarea" name="topic" placeholder="Name : Input a name for topic"></textarea>
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Create</button>
    </div>
    </form>
</div>
<div style="display: none" class="login-box claim-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Create a new claim
    </div>
    <div class="input-item">
        <input name="topic_id" value="{{claim_id}}" style="display: none">
        <textarea type="text" class="" style="width: 80%;" name="claim" placeholder=": Input a heading message"></textarea>
    </div>
    <div class="input-item">
        <div class="table_div">
            <table style="width: 100%;">
                <tr>
                    <th style="width: 33%;"></th>
                    <th>opposed</th>
                    <th>equivalent</th>
                </tr>
                {% for claim in claim_list %}
                <tr>
                    <td>{{ claim.heading }}</td>
                    <td><input name="claim_{{ claim.id }}" value="opposed" type="radio"> </td>
                    <td><input name="claim_{{ claim.id }}" value="equivalent" type="radio"></td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Create</button>
    </div>
    </form>
</div>
<div style="display: none" class="login-box reply-claim-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Reply to claim
    </div>
    <div class="input-item">
        <input name="claim_id" value="{{claim_id}}" style="display: none">
        <textarea type="text" class="" rows="5" style="width: 80%;" name="reply_detail" placeholder=": Input a text"></textarea>
    </div>
    <div class="input-item">
        <div class="table_div" style="height: 122px;">
            <select name="claim">
                <option value="clarification">clarification</option>
                <option value="supporting argument">supporting argument</option>
                <option value="counterargument">counterargument</option>
            </select>
        </div>
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Post</button>
    </div>
    </form>
</div>
<div style="display: none" class="login-box reply-reply-shadow">
    <form>
    <div class="close-btn">
        <img src="/static/imgs/close.png" width="40" height="40" class="close-login-btn" alt="">
    </div>
    <div class="input-item header">
        Reply to reply
    </div>
    <div class="input-item">
        <input name="claim_id" value="{{claim_id}}" style="display: none">
        <input name="reply_id" id="reply_set_id" style="display: none">
        <textarea type="text" class="" rows="5" style="width: 80%;" name="reply_detail" placeholder=": Input a text"></textarea>
    </div>
    <div class="input-item">
        <div class="table_div" style="height: 122px;">
            <select name="reply">
                <option value="evidence">evidence</option>
                <option value="support">support</option>
                <option value="rebuttal">rebuttal</option>
            </select>
        </div>
    </div>
    <div class="input-item bottom">
        <button type="button" class="btn">Post</button>
    </div>
    </form>
</div>
<script>
    $(function () {
        $("#login-link").click(function () {
            // $(".login-box").show();
            $(".login-shadow").show();
            $(".shadow").show();
        });
        $("#register-link").click(function () {
            // $(".login-box").show();
            $(".register-shadow").show();
            $(".shadow").show();
        });
        $(".close-login-btn").click(function () {
            $(".login-box").hide();
            $(".shadow").hide();
        });

        $(".login-shadow .btn").click(function () {
           ajax(this,"{{url_for('user_login')}}");
        });
        $(".register-shadow .btn").click(function () {
           ajax(this,"{{url_for('user_register')}}");
        });
        //add_topic
        $(".add_topic").click(function () {
            $(".topic-shadow").show();
            $(".shadow").show();
        });
        $(".topic-shadow .btn").click(function () {
           ajax(this,"{{url_for('add_topic')}}");
        });
        $(".add_claim").click(function () {
            $(".claim-shadow").show();
            $(".shadow").show();
        });
        $(".claim-shadow .btn").click(function () {
            ajax(this,"{{url_for('add_claim')}}");
        });
        $(".add_reply_claim").click(function () {
            $(".reply-claim-shadow").show();
            $(".shadow").show();
        });
        $(".reply-claim-shadow .btn").click(function () {
            ajax(this,"{{url_for('add_reply')}}");
        });

        $(".reply_to_reply").click(function () {
            var nid = $(this).attr("attr-id");

            $("#reply_set_id").val(nid);
            $(".reply-reply-shadow").show();
            $(".shadow").show();
        });
        $(".reply-reply-shadow .btn").click(function () {
            ajax(this,"{{url_for('add_reply')}}");
        });
        $("input[type=radio]").click(function () {
            console.log("==========>>>>>>>>>>>")
            var $radio = $(this);
            if($radio.data("checked")) {
                $radio.prop("checked",false);
                $radio.data("checked",false);
            } else {
                $radio.prop("checked",true);
                $radio.data("checked",true);
            }
        });
    });
    function ajax(obj,url,func=null) {
        if (func == null) {
            func = function (msg) {
                if (msg.status == 0) {
                    location.href = location.href;
                } else if (msg.status == 51) {
                    alert(msg.msg)
                    $(".close-login-btn").click();
                    $("#login-link").click();
                } else {
                    alert(msg.msg);
                }
            }
        };
        var $this = $(obj);
        var forms = $this.parents("form").serialize();
        $.ajax({
            type:"post",
            url:url,
            data:forms,
            success: func,
        })
    }
</script>